<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Movie Search (TMDB)</title>
  <style>
  body {
    font-family: Arial, sans-serif;
    background: #111;
    color: #fff;
    padding: 20px;
  }

  h1 {
    text-align: center;
    color: #f5c518;
  }

  .search-box {
    text-align: center;
    margin-bottom: 30px;
  }

  input {
    padding: 10px;
    width: 300px;
    border-radius: 5px;
    border: none;
  }

  button {
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    background: #f5c518;
    cursor: pointer;
  }

  .movies {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
  }

  .movie {
    background: #1c1c1c;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.6);
  }

  .movie img {
    width: 100%;
    height: 330px;
    object-fit: cover;
  }

  .movie-content {
    padding: 15px;
  }

  .movie h3 {
    margin: 0 0 10px;
    font-size: 16px;
  }

  .rating {
    color: #f5c518;
    font-weight: bold;
  }

  .error {
    text-align: center;
    color: red;
  }
</style>

</head>
<body>

<h1>üé¨ Movie Search (TMDB)</h1>

<div class="search-box">
  <input type="text" id="query" placeholder="Enter movie name..." />
  <button onclick="searchMovie()">Search</button>
</div>

<div id="result" class="movies"></div>

<script>
  async function searchMovie() {
    const query = document.getElementById("query").value;
    const resultDiv = document.getElementById("result");

    resultDiv.innerHTML = "";

    if (!query) {
      resultDiv.innerHTML = `<p class="error">Please enter a movie name</p>`;
      return;
    }

    try {
      const response = await fetch(`/api/movies/search?query=${query}`);
      const data = await response.json();

      if (!data.success) {
        resultDiv.innerHTML = `<p class="error">${data.message}</p>`;
        return;
      }

      data.movies.forEach(movie => {
        const div = document.createElement("div");
        div.className = "movie";

        div.innerHTML = `
          <img src="https://image.tmdb.org/t/p/w500${movie.poster}" alt="${movie.title}">
          <div class="movie-content">
            <h3>${movie.title}</h3>
            <p class="rating">‚≠ê ${movie.rating}</p>
            <p>üìÖ ${movie.release_date}</p>
            <p>${movie.overview.substring(0, 100)}...</p>
          </div>
        `;

        resultDiv.appendChild(div);
      });

    } catch (error) {
      resultDiv.innerHTML = `<p class="error">Something went wrong</p>`;
    }
  }
</script>
</body>
</html>
